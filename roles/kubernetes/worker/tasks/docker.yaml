- name: Install Docker Repo (Fedora)
  yum_repository:
    name: Docker
    description: Docker repo
    baseurl: https://download.docker.com/linux/fedora/$releasever/$basearch/stable
    gpgkey: https://download.docker.com/linux/fedora/gpg
  when: ansible_distribution == 'Fedora'
  register: fedora_install

- name: Install docker
  package:
    name: docker-ce
    state: present
  when: fedora_install is succeeded
  register: install_packages

- name: Start docker service
  systemd:
    name: docker
    state: started
    enabled: yes
